
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <title>Đăng ký Thông tin nhà xe</title>
    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link href="~/Content/materialize/css/materialize.min.css" rel="stylesheet" media="screen,projection" />
    <link href="~/Content/font-awesome.min.css" rel="stylesheet" />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body style="padding-top: 100px;">

    <div class="container">
        <div class="row">
            <form class="col s12" method="post" id="contact_us" enctype="multipart/form-data">
                <div class="row">
                    <div class="col s12">
                        <h3>Đăng ký thông tin nhà xe</h3>
                    </div>
                </div>
                <div class="row">                    
                    <div class="input-field col s6">
                        <i class="material-icons prefix">account_circle</i>
                        <input id="first_name" name="first_name" type="text" class="validate">
                        <label for="icon_prefix">Tên nhà xe:</label>
                    </div>
                    <div class="input-field col s6">
                        <i class="material-icons prefix">phone</i>
                        <input id="phone_number" name="phone_number" type="text" class="validate">
                        <label for="phone_number">Số điện thoại:</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s6">
                        <i class="fa fa-address-card prefix"></i>
                        <input id="add_ress" name="add_ress" type="text" class="validate">
                        <label for="icon_prefix">Địa chỉ</label>
                    </div>
                    <div class="input-field col s6">
                        <i class="fa fa-envelope prefix"></i>
                        <input id="email" name="email" type="text" class="validate">
                        <label for="phone_number">Email:</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s6">
                        <i class="fa fa-link prefix"></i>
                        <input id="website" name="website" type="text" class="validate">
                        <label for="website">Website:</label>
                    </div>
                    <div class="input-field col s6">
                        <i class="fa fa-car prefix"></i>
                        <select multiple id="loaixe" name="loaixe">
                            <option value="" disabled selected>Chọn loại xe</option>
                            <option value="4">Xe 4 chỗ</option>
                            <option value="5">Xe 5 chỗ</option>
                            <option value="7">Xe 7 chỗ</option>
                            <option value="16">Xe 16 chỗ</option>
                            <option value="29">Xe 29 chỗ</option>
                            <option value="35">Xe 35 chỗ</option>
                            <option value="45">Xe 45 chỗ</option>
                        </select>
                        
                        <label for="loaixe">Loại xe:</label>
                    </div>
                    
                </div>
                <div class="row">
                    <div class="input-field col s6">
                        <i class="fa fa-money prefix"></i>
                        <input id="banggia" name="banggia" type="text" class="validate">
                        <label for="banggia">Bảng giá:</label>
                    </div>
                    
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <i class="fa fa-train prefix"></i>
                        <textarea rows="10" id="tour" name="tour" type="text" class="materialize-textarea"></textarea>
                        <label for="tous">Các tour hay đi:</label>
                    </div>
                </div>
                <div class="row">
                   
                    <div class="file-field input-field col s6">
                        <div class="btn">
                            <span>Hình ảnh</span>
                            <input type="file" id="hinh_anh" name="hinh_anh">
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col s12">
                        <button type="button" class="waves-effect waves-light btn" id="btn_contact" onclick="contactus(event);"><i class="material-icons left">done</i>Gửi thông tin đăng ký</button>
                    </div>
                </div>
            </form>
        </div>

    </div>

    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="~/Content/materialize/js/materialize.min.js"></script>

    <script>
        $(document).ready(function () {
            $('select').material_select();
        });

        function contactus(e) {
            e.preventDefault();
            var formdata = new FormData(); //FormData object
            
            if (document.getElementById("first_name").value === "") {
                alert('Vui lòng nhập tên nhà xe.');
                document.getElementById("first_name").focus();
                return false;
            }

            if (document.getElementById("phone_number").value === "") {
                alert('Vui lòng nhập số điện thoại.');
                document.getElementById("phone_number").focus();
                return false;
            }

            if (document.getElementById("add_ress").value === "") {
                alert('Vui lòng nhập địa chỉ.');
                document.getElementById("add_ress").focus();
                return false;
            }

            if (document.getElementById("email").value === "") {
                alert('Vui lòng nhập email nhà xe.');
                document.getElementById("email").focus();
                return false;
            }
                       
            var $file = document.getElementById('hinh_anh'),
            $formData = new FormData();

            if ($file.files.length > 0) {
                for (var i = 0; i < $file.files.length; i++) {
                    $formData.append('file-' + i, $file.files[i]);
                }
            }

            $formData.append("first_name", document.getElementById("first_name").value);
            $formData.append("add_ress", document.getElementById("add_ress").value);
            $formData.append("email", document.getElementById("email").value);
            $formData.append("website", document.getElementById("website").value);

            var loaixe = [];
            $('#loaixe :selected').each(function (i, selected) {
                loaixe[i] = $(selected).val();
            });

            $formData.append("loaixe", loaixe);
            $formData.append("banggia", document.getElementById("banggia").value);
            $formData.append("tour", document.getElementById("tour").value);
            
            document.getElementById('btn_contact').innerHTML = 'Đang gửi thông tin đăng ký...';
            document.getElementById('btn_contact').disabled = true;
            $.ajax({
                url: '/home/contactus',
                type: 'POST',
                data: $formData,
                dataType: 'json',
                contentType: false,
                processData: false,
                success: function ($data) {
                    alert('Thông tin đăng ký của bạn đã được gửi thành công, chúng tôi sẽ liên lạc sớm lại cho bạn.');
                    document.getElementById('btn_contact').innerHTML = 'Gửi thông tin đăng ký';
                    document.getElementById('btn_contact').disabled = false;
                }
            });          
            

        }

    </script>
</body>
</html>